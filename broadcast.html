<!DOCTYPE html>
<html>
<head>
  <script src="node_modules/es5-shim/es5-shim.js"></script>
  <script src="node_modules/angular/angular.js"></script>
  <script src="node_modules/simplewebrtc/latest.js"></script>
  <script src="ng-simple-webrtc.js"></script>
  <link href="styles.css" rel="stylesheet">
</head>
<body ng-app="BroadcastApp">
  <p>Simple Angular broadcaster via WebRTC</p>

  <div id="ctrl" ng-controller="BroadcastAppController">
    <button ng-click="prepare()" ng-disabled="hasStream">Prepare to broadcast</button>

    <broadcaster
      has-stream="hasStream"
      mirror="true"
      room-name="roomName"
      is-broadcasting="isBroadcasting"></broadcaster>

    <div ng-show="hasStream">
      <h3>Start my own room</h3>
      <input type="text" ng-model="roomName" placeholder="Enter a new room name" />
      <button ng-click="start()" ng-disabled="!roomName || broadcasting">Start room</button>

      <p ng-show="isBroadcasting">Broadcasting. To watch connect to this server and open
      <a href="watch.html" target="_blank">watch.html</a> page.
      Enter the same room "{{ roomName }}" and watch this video stream.</p>
    </div>

  </div>

  <script src="node_modules/console-log-div/console-log-div.js"></script>

  <script>
    angular.module('BroadcastApp', ['SimpleWebRTC'])
      .controller('BroadcastAppController', function ($scope) {
        $scope.hasStream = false;
        $scope.roomName = '';
        $scope.isBroadcasting = '';

        $scope.prepare = function prepare() {
          $scope.$broadcast('prepare');
        };

        $scope.start = function start() {
          $scope.$broadcast('start');
        };
      });
  </script>
</body>
</html>
